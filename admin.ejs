<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Painel de Den√∫ncias</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-white p-6 min-h-screen">

  <h2 class="text-2xl font-bold mb-4 text-gray-800">üìã Painel de Den√∫ncias</h2>

  <div class="overflow-x-auto">
    <table class="min-w-full bg-white border border-gray-200 shadow-sm rounded-lg">
      <thead>
        <tr class="bg-gray-100 text-left text-sm font-medium text-gray-700">
          <th class="px-4 py-2 border-b">ID</th>
          <th class="px-4 py-2 border-b">Descri√ß√£o</th>
          <th class="px-4 py-2 border-b">Identifica√ß√£o</th>
          <th class="px-4 py-2 border-b">Arquivo</th>
          <th class="px-4 py-2 border-b">Data</th>
          <th class="px-4 py-2 border-b">Status</th>
          <th class="px-4 py-2 border-b">A√ß√µes</th>
        </tr>
      </thead>
      <tbody>
        <% denuncias.forEach(denuncia => { %>
          <tr class="border-t hover:bg-gray-50 text-sm align-top">
            <td class="px-4 py-2"><%= denuncia.id %></td>
            <td class="px-4 py-2"><%= denuncia.descricao %></td>
            <td class="px-4 py-2"><%= denuncia.identificacao %></td>
            <td class="px-4 py-2">
              <% if (denuncia.arquivo) { %>
                <a href="/uploads/<%= denuncia.arquivo %>" class="text-blue-600 hover:underline" target="_blank" rel="noopener noreferrer">Ver</a>
              <% } else { %>
                <span class="text-gray-400">Nenhum</span>
              <% } %>
            </td>
            <td class="px-4 py-2">
              <%= denuncia.data_formatada || 'Data indispon√≠vel' %>
            </td>
            <td class="px-4 py-2">
              <% if (denuncia.status === 'Pendente') { %>
                <span class="text-yellow-700 bg-yellow-100 px-2 py-1 rounded-full text-xs font-semibold">Pendente</span>
              <% } else { %>
                <span class="text-green-700 bg-green-100 px-2 py-1 rounded-full text-xs font-semibold">Resolvido</span>
              <% } %>
            </td>
            <td class="px-4 py-2">
              <form action="/admin/status/<%= denuncia.id %>" method="POST" class="inline">
                <input type="hidden" name="status" value="<%= denuncia.status === 'Pendente' ? 'Resolvido' : 'Pendente' %>" />
                <button type="submit"
                  class="px-3 py-1 text-xs rounded text-white
                    <%= denuncia.status === 'Pendente' ? 'bg-green-600 hover:bg-green-700' : 'bg-yellow-500 hover:bg-yellow-600' %>">
                  <%= denuncia.status === 'Pendente' ? 'Marcar Resolvido' : 'Marcar Pendente' %>
                </button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>

</body>
</html>
